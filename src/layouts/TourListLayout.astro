---
import TourLayout from "./TourLayout.astro";
import type { CollectionName } from "src/content/config";
import { getCollection } from "astro:content";
import Article from "@components/Article.astro";

interface Props {
  rootPath: string;
  sectionName: string;
  collectionName: CollectionName;
  image: {
    path: string;
    alt: string;
    style: string;
  };
}

const { rootPath, sectionName, collectionName, image } = Astro.props;

const tours = (await getCollection(collectionName)).sort(
  (a, b) => a.data.id - b.data.id
);
---

<TourLayout image={image} sectionName={sectionName}>
  <ul class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    {
      tours.map((tour) => (
        <li
          class="border-extra-soft-white text-soft-white hover:bg-soft-light rounded-xl border transition-colors duration-200"
          transition:name={tour.id}
        >
          <Article {...tour.data}>
            <h4 class="text-xl font-bold">{tour.data.title}</h4>
            <p class="text-sm text-gray-700">{tour.data.text}</p>
            <a href={`/${rootPath}/${tour.slug}`} class="inline-flex">
              <span class="bg-primary-500 hover:bg-secondary-500 transition-colors duration-300 py-3 px-6 text-sm font-bold text-white rounded-md">
                Ver itinerario
              </span>
            </a>
          </Article>
        </li>
      ))
    }
  </ul>
</TourLayout>
